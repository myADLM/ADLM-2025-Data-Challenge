{"ast":null,"code":"var _jsxFileName = \"/Users/evelyn.goodman/ADLM-2025-Data-Challenge-PREMS/adlm-2025-prems/chat_web/src/App.js\",\n  _s = $RefreshSig$();\n// src/App.js\nimport React, { useState } from \"react\";\nimport ChatForm from \"./components/ChatForm\";\nimport ChatMessages from \"./components/ChatMessages\";\nimport { streamChat } from \"./ApiClient\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const [messages, setMessages] = useState([\n  // optional seed\n  {\n    id: \"w1\",\n    role: \"assistant\",\n    text: \"Hi! Ask me a question.\"\n  }]);\n  const [err, setErr] = useState(\"\");\n  const [isStreaming, setIsStreaming] = useState(false);\n  const startChat = async userText => {\n    setErr(\"\");\n\n    // push user message immediately\n    const userMsg = {\n      id: crypto.randomUUID(),\n      role: \"user\",\n      text: userText\n    };\n    setMessages(prev => [...prev, userMsg]);\n\n    // create a placeholder assistant message to append to\n    const asstId = crypto.randomUUID();\n    let draft = \"\";\n    setMessages(prev => [...prev, {\n      id: asstId,\n      role: \"assistant\",\n      text: \"\"\n    }]);\n    setIsStreaming(true);\n    try {\n      for await (const event of streamChat(userText)) {\n        switch (event.type) {\n          case \"reply\":\n            {\n              // payload is a small string chunk\n              draft += typeof event.payload === \"string\" ? event.payload : String(event.payload);\n              setMessages(prev => prev.map(m => m.id === asstId ? {\n                ...m,\n                text: draft\n              } : m));\n              break;\n            }\n          case \"tool_call_started\":\n            {\n              // show tool activity in the transcript\n              const info = typeof event.payload === \"object\" ? `Calling tool \"${event.payload.function}\"…` : \"Calling tool…\";\n              const toolMsg = {\n                id: crypto.randomUUID(),\n                role: \"system\",\n                text: info\n              };\n              setMessages(prev => [...prev, toolMsg]);\n              break;\n            }\n          case \"tool_call_response\":\n            {\n              const val = typeof event.payload === \"object\" && \"value\" in event.payload ? JSON.stringify(event.payload.value) : JSON.stringify(event.payload);\n              const toolMsg = {\n                id: crypto.randomUUID(),\n                role: \"system\",\n                text: `Tool result: ${val}`\n              };\n              setMessages(prev => [...prev, toolMsg]);\n              break;\n            }\n          case \"error\":\n            {\n              setErr(typeof event.payload === \"string\" ? event.payload : JSON.stringify(event.payload));\n              break;\n            }\n          default:\n            {\n              // ignore unknown lines, or log them\n              console.debug(\"unhandled event\", event);\n            }\n        }\n      }\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setIsStreaming(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container min-vh-100 d-flex flex-column py-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"h4 mb-0\",\n        children: \"ADLM 2025\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n        className: \"text-muted\",\n        children: \"Desciption here.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card shadow-sm flex-grow-1 d-flex\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body p-0 d-flex flex-column\",\n        style: {\n          minHeight: 0\n        },\n        children: [/*#__PURE__*/_jsxDEV(ChatMessages, {\n          messages: messages\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-danger m-3 mb-0\",\n          role: \"alert\",\n          children: err\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-top p-3\",\n          children: /*#__PURE__*/_jsxDEV(ChatForm, {\n            placeholder: isStreaming ? \"Receiving reply…\" : \"Type your message…\",\n            onSubmit: startChat,\n            disabled: isStreaming // prevent overlapping requests\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"text-center text-muted small mt-3\",\n      children: \"PREMS 2025 ADLM Submission\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"yFgnIDUx1EE9E2YqbjewskOG4iY=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","ChatForm","ChatMessages","streamChat","jsxDEV","_jsxDEV","App","_s","messages","setMessages","id","role","text","err","setErr","isStreaming","setIsStreaming","startChat","userText","userMsg","crypto","randomUUID","prev","asstId","draft","event","type","payload","String","map","m","info","function","toolMsg","val","JSON","stringify","value","console","debug","e","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","minHeight","placeholder","onSubmit","disabled","_c","$RefreshReg$"],"sources":["/Users/evelyn.goodman/ADLM-2025-Data-Challenge-PREMS/adlm-2025-prems/chat_web/src/App.js"],"sourcesContent":["// src/App.js\nimport React, { useState } from \"react\";\nimport ChatForm from \"./components/ChatForm\";\nimport ChatMessages from \"./components/ChatMessages\";\nimport { streamChat } from \"./ApiClient\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nexport default function App() {\n  const [messages, setMessages] = useState([\n    // optional seed\n    { id: \"w1\", role: \"assistant\", text: \"Hi! Ask me a question.\" },\n  ]);\n  const [err, setErr] = useState(\"\");\n  const [isStreaming, setIsStreaming] = useState(false);\n\n  const startChat = async (userText) => {\n    setErr(\"\");\n\n    // push user message immediately\n    const userMsg = { id: crypto.randomUUID(), role: \"user\", text: userText };\n    setMessages((prev) => [...prev, userMsg]);\n\n    // create a placeholder assistant message to append to\n    const asstId = crypto.randomUUID();\n    let draft = \"\";\n    setMessages((prev) => [...prev, { id: asstId, role: \"assistant\", text: \"\" }]);\n\n    setIsStreaming(true);\n    try {\n      for await (const event of streamChat(userText)) {\n        switch (event.type) {\n          case \"reply\": {\n            // payload is a small string chunk\n            draft += typeof event.payload === \"string\" ? event.payload : String(event.payload);\n            setMessages((prev) =>\n              prev.map((m) => (m.id === asstId ? { ...m, text: draft } : m))\n            );\n            break;\n          }\n          case \"tool_call_started\": {\n            // show tool activity in the transcript\n            const info =\n              typeof event.payload === \"object\"\n                ? `Calling tool \"${event.payload.function}\"…`\n                : \"Calling tool…\";\n            const toolMsg = { id: crypto.randomUUID(), role: \"system\", text: info };\n            setMessages((prev) => [...prev, toolMsg]);\n            break;\n          }\n          case \"tool_call_response\": {\n            const val =\n              typeof event.payload === \"object\" && \"value\" in event.payload\n                ? JSON.stringify(event.payload.value)\n                : JSON.stringify(event.payload);\n            const toolMsg = { id: crypto.randomUUID(), role: \"system\", text: `Tool result: ${val}` };\n            setMessages((prev) => [...prev, toolMsg]);\n            break;\n          }\n          case \"error\": {\n            setErr(typeof event.payload === \"string\" ? event.payload : JSON.stringify(event.payload));\n            break;\n          }\n          default: {\n            // ignore unknown lines, or log them\n            console.debug(\"unhandled event\", event);\n          }\n        }\n      }\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setIsStreaming(false);\n    }\n  };\n\n  return (\n    <div className=\"container min-vh-100 d-flex flex-column py-3\">\n      <header className=\"mb-3\">\n        <h1 className=\"h4 mb-0\">ADLM 2025</h1>\n        <small className=\"text-muted\">Desciption here.</small>\n      </header>\n\n      <div className=\"card shadow-sm flex-grow-1 d-flex\">\n        <div className=\"card-body p-0 d-flex flex-column\" style={{ minHeight: 0 }}>\n          <ChatMessages messages={messages} />\n\n          {err && (\n            <div className=\"alert alert-danger m-3 mb-0\" role=\"alert\">\n              {err}\n            </div>\n          )}\n\n          <div className=\"border-top p-3\">\n            <ChatForm\n              placeholder={isStreaming ? \"Receiving reply…\" : \"Type your message…\"}\n              onSubmit={startChat}\n              disabled={isStreaming} // prevent overlapping requests\n            />\n          </div>\n        </div>\n      </div>\n\n      <footer className=\"text-center text-muted small mt-3\">\n        PREMS 2025 ADLM Submission\n      </footer>\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}